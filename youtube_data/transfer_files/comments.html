<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>댓글 보기</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center; /* 수평 가운데 정렬 */
            align-items: center; /* 수직 가운데 정렬 */
            min-height: 100vh; /* 화면 전체 높이를 차지 */
            background-color: #f9f9f9;
            font-family: Arial, sans-serif;
        }

        .comment-container {
            width: 100%;
            max-width: 600px; /* 중앙 정렬을 위한 최대 너비 설정 */
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow-y: auto; /* 스크롤 활성화 */
            max-height: 90vh; /* 화면 높이 초과 시 스크롤 */
        }

        .video-title {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }

        .comment-list {
            display: flex;
            flex-direction: column; /* 세로 정렬 */
            gap: 20px; /* 댓글 간 간격 */
        }

        .comment-card {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 80%; /* 너비를 화면 비율의 80%로 설정 */
            margin: 0 auto; /* 중앙 정렬 */
            max-width: 400px; /* 최대 너비 제한 */
        }

        .comment-text {
            font-size: 1em;
            margin-bottom: 10px;
        }

        .comment-likes {
            font-size: 0.9em;
            color: gray;
        }

        /* 반응형 처리 */
        @media (max-width: 768px) {
            .comment-container {
                max-width: 90%; /* 작은 화면에서 너비 조정 */
            }
        }
    </style>
</head>
<body>
    <div id="comments-container"></div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // URL에서 videoId 가져오기
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('videoId');

            // comments_data.json 로드
            fetch("./comments_data.json")
                .then(response => {
                    if (!response.ok) {
                        throw new Error('JSON 파일을 불러올 수 없습니다. 상태 코드: ' + response.status);
                    }
                    return response.json(); // JSON 데이터를 파싱
                })
                .then(commentsData => {
                    const commentsContainer = document.getElementById('comments-container');

                    if (commentsData[videoId]) {
                        commentsContainer.innerHTML = commentsData[videoId];
                    } else {
                        commentsContainer.innerHTML = "<p>해당 동영상에 대한 댓글 데이터를 찾을 수 없습니다.</p>";
                    }
                })
                .catch(error => {
                    console.error("댓글 데이터를 로드할 수 없습니다:", error);
                    console.log("현재 videoId:", videoId);
                    console.log("JSON 키들:", Object.keys(commentsData));
                    const commentsContainer = document.getElementById('comments-container');
                    commentsContainer.innerHTML = "<p>댓글 데이터를 불러오는 중 문제가 발생했습니다.</p>";
                });

            // 링크 클릭 시 현재 탭에서 이동하도록 설정
            document.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault(); // 새 탭 열림 방지
                    window.location.href = this.href; // 현재 탭에서 이동
                });
            });
        });
    </script>
</body>
</html>
